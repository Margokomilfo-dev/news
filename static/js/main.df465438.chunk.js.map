{"version":3,"sources":["App.module.sass","api/api.ts","App.tsx","index.tsx"],"names":["module","exports","instance","axios","create","baseURL","newsApi","get","then","res","data","id","response","name","AppModule","useState","stateId","setStateId","stateNews","setStateNews","usersState","setUsersState","useEffect","setTimeOutId","setTimeout","map","el","state","by","clearTimeout","className","i","s","item","firstPart","index","href","url","title","submitted","length","secondPart","stars","score","thirdPart","author","ReactDOM","render","App","document","getElementById"],"mappings":"oGACAA,EAAOC,QAAU,CAAC,KAAO,kBAAkB,UAAY,uBAAuB,MAAQ,mBAAmB,MAAQ,mBAAmB,WAAa,wBAAwB,MAAQ,mBAAmB,UAAY,uBAAuB,OAAS,sB,wHCC5OC,E,OAAWC,EAAMC,OAAO,CACxBC,QAAQ,2CAqBCC,EAAU,WAEf,OAAOJ,EAASK,IAAmB,+DAA+DC,MAAK,SAAAC,GACnG,OAAOA,EAAIC,SAHVJ,EAAU,SAMVK,GACL,OAAOT,EAASK,IAAT,eAA8BI,EAA9B,uBAAuDH,MAAK,SAAAI,GAC/D,OAAOA,EAASF,SARfJ,EAAU,SAWXO,GACJ,OAAOX,EAASK,IAAT,eAA+BM,EAA/B,uBAA0DL,MAAK,SAAAI,GAClE,OAAOA,EAASF,SCmCbI,MApEf,WAAsB,IAAD,EAEaC,mBAA+B,MAF5C,mBAEVC,EAFU,KAEDC,EAFC,OAGiBF,mBAAyB,IAH1C,mBAGVG,EAHU,KAGCC,EAHD,OAImBJ,mBAA0B,IAJ7C,mBAIVK,EAJU,KAIEC,EAJF,KAmCjB,OA7BAC,qBAAU,WACNhB,IACKE,MAAK,SAAAC,GACFQ,EAAWR,QAEpB,IAEHa,qBAAU,WACN,IAAIC,EAAeC,YAAW,WAC1BR,GAAWA,EAAQS,KAAI,SAAAC,GACnBpB,EAAgBoB,GACXlB,MAAK,SAAAC,GAGF,OADAU,GAAa,SAAAQ,GAAK,4BAAQA,GAAR,CAAelB,OAC1BA,KAEVD,MAAK,SAAAC,GACFH,EAAgBG,EAAImB,IAAIpB,MAAK,SAACC,GAC1BY,GAAc,SAAAM,GAAK,4BAAQA,GAAR,CAAelB,kBAInD,GACH,OAAO,WACHoB,aAAaN,MAElB,CAACP,IAIA,sBAAKc,UAAU,MAAf,UACI,uCACA,uDACCZ,GAAaA,EAAUO,KAAI,SAACC,EAAIK,GAAL,OACxB,sBAAaD,UAAWE,IAAEC,KAA1B,UACI,sBAAKH,UAAWE,IAAEE,UAAlB,UACI,gCACI,uBAAMJ,UAAWE,IAAEG,MAAnB,UAA2BJ,EAAI,EAA/B,QACA,oBAAGK,KAAMV,EAAGW,IAAKP,UAAWE,IAAEM,MAA9B,UAAsCZ,EAAGY,MAAzC,UAEJ,6CACelB,EAAWW,IAAMX,EAAWW,GAAGQ,UAAUC,aAG5D,qBAAKV,UAAWE,IAAES,WAAlB,SACK,sBAAMX,UAAWE,IAAEU,MAAnB,SACoB,IAAbhB,EAAGiB,MAAc,0CACD,IAAbjB,EAAGiB,MAAc,gDACA,IAAbjB,EAAGiB,MAAc,sDACA,IAAbjB,EAAGiB,MAAc,4DACb,sEAI3B,qBAAKb,UAAWE,IAAEY,UAAlB,SACI,uBAAMd,UAAWE,IAAEa,OAAnB,iBAA+B,+BAAOnB,EAAGE,YArBvCG,UCvC1Be,IAASC,OACL,cAACC,EAAD,IACFC,SAASC,eAAe,W","file":"static/js/main.df465438.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"App_item__3a-vH\",\"firstPart\":\"App_firstPart__nT_sT\",\"index\":\"App_index__20vq5\",\"title\":\"App_title__vPAHx\",\"secondPart\":\"App_secondPart__NbFMc\",\"stars\":\"App_stars__3pMNc\",\"thirdPart\":\"App_thirdPart__1fNqu\",\"author\":\"App_author__3Ys7e\"};","import axios from \"axios\"\r\n\r\nlet instance = axios.create({\r\n    baseURL: `https://hacker-news.firebaseio.com/v0/`,\r\n})\r\n\r\nexport type ObjType = {\r\n    by: string\r\n    descendants: number\r\n    id: number\r\n    score: number\r\n    time: number\r\n    title: string\r\n    type: string\r\n    url: string\r\n    kids: Array<number>\r\n}\r\nexport type UserType = {\r\n    about: string\r\n    created: number\r\n    id: string\r\n    karma: number\r\n    submitted: Array<number>\r\n}\r\nexport const newsApi = {\r\n    getIds () {\r\n        return instance.get<Array<number>>('newstories.json?print=pretty&orderBy=\"$key\"&limitToFirst=30').then(res => {\r\n            return res.data\r\n        })\r\n    },\r\n    getNews (id: number) {\r\n        return instance.get<ObjType>(`item/${id}.json?print=pretty`,).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    getUser(name:string) {\r\n        return instance.get<UserType>(`user/${name}.json?print=pretty`,).then(response => {\r\n            return response.data\r\n        })\r\n    }\r\n}","import React, {useEffect, useState} from 'react'\nimport s from './App.module.sass'\nimport {newsApi, ObjType, UserType} from './api/api'\n\nfunction AppModule() {\n\n    const [stateId, setStateId] = useState<Array<number> | null>(null)\n    const [stateNews, setStateNews] = useState<Array<ObjType>>([])\n    const [usersState, setUsersState] = useState<Array<UserType>>([])\n\n    useEffect(() => {\n        newsApi.getIds()\n            .then(res => {\n                setStateId(res)\n            })\n    }, [])\n\n    useEffect(() => {\n        let setTimeOutId = setTimeout(() => {\n            stateId && stateId.map(el => {\n                newsApi.getNews(el)\n                    .then(res => {\n                        // console.log(res)\n                        setStateNews(state => [...state, res])\n                        return res\n                    })\n                    .then(res => {\n                        newsApi.getUser(res.by).then((res) => {\n                            setUsersState(state => [...state, res])\n                        })\n                    })\n            })\n        }, 0)\n        return () => {\n            clearTimeout(setTimeOutId)\n        }\n    }, [stateId])\n\n\n    return (\n        <div className=\"App\">\n            <h1>News.</h1>\n            <div>The last 30 HOT news</div>\n            {stateNews && stateNews.map((el, i) =>\n                <div key={i} className={s.item}>\n                    <div className={s.firstPart}>\n                        <div>\n                            <span className={s.index}>{i + 1}. </span>\n                            <a href={el.url} className={s.title}>{el.title} </a>\n                        </div>\n                        <div>\n                            comments: {usersState[i] && usersState[i].submitted.length}\n                        </div>\n                    </div>\n                    <div className={s.secondPart}>\n                         <span className={s.stars}>\n                               {el.score === 1 ? <span>&#9733;</span> :\n                                   el.score === 2 ? <span>&#9733;&#9733;</span> :\n                                       el.score === 3 ? <span>&#9733;&#9733;&#9733;</span> :\n                                           el.score === 4 ? <span>&#9733;&#9733;&#9733;&#9733;</span> :\n                                               <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span>\n                               }\n                            </span>\n                    </div>\n                    <div className={s.thirdPart}>\n                        <span className={s.author}> by <span>{el.by}</span></span>\n                    </div>\n                </div>)}\n        </div>\n    )\n}\n\nexport default AppModule\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppModule from './App';\n\nReactDOM.render(\n    <AppModule />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}